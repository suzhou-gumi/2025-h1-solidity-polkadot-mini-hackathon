Author:Curtisyanæ±Ÿå—æ˜“
å­¦å·ï¼š1906
GitHub:https://github.com/CurtisYan/blockchain-lottery
å‰è¨€ï¼šç›®å‰è¯¥é¡¹ç›®åªæ˜¯åšäº†ä¸ªåŸºç¡€ç‰ˆçš„åŠŸèƒ½ï¼Œå®Œæ•´ç‰ˆæ˜¯ä½œè€…çš„å®Œæ•´æ„æ€ã€‚ä»¥åè¯¥ä»£ç è¿˜ä¼šç»´æŠ¤ï¼Œè”ç³»æ–¹å¼åœ¨æœ«å°¾ã€‚é¦–æ¬¡ä½¿ç”¨å¯ä»¥çœ‹çœ‹è¯´æ˜æ–‡ä»¶ç›®å½•ä¸‹å•å®Œæ•´ç‰ˆåŠŸèƒ½è¯´æ˜ï¼Œè¯¥é¡¹ç›®è¿˜æœ‰å¾ˆå¤§æ½œåŠ›
ï¼ï¼ï¼åŠŸèƒ½è¯´æ˜åœ¨ /è¯´æ˜æ–‡ä»¶/åŸºç¡€ç‰ˆå¤§çº² ï¼ï¼ï¼
åœ¨çº¿é¢„è§ˆæ­¤ DAPPï¼šhttps://lottery-app-ivory.vercel.app/
æ¼”ç¤ºè§†é¢‘ï¼šhttps://www.bilibili.com/video/BV146JAzHEUu/?share_source=copy_web&vd_source=1ef6bbd8ba59bed719b19befcbd89f5a

æµ‹è¯•ç½‘é¢†æ°´ï¼šhttps://faucet.moonbeam.network/
 éƒ¨ç½²çš„åˆçº¦åœ°å€ï¼š0x84F045AB0F7Fe1278A1D2fb2E334409894A8E35D
 æŸ¥è¯¢é“¾æ¥:https://moonbase.moonscan.io/address/0x84F045AB0F7Fe1278A1D2fb2E334409894A8E35D
# åŒºå—é“¾å»ä¸­å¿ƒåŒ–æŠ½å¥–å¹³å°

åŸºäºåŒºå—é“¾æŠ€æœ¯çš„å…¬å¹³ã€é€æ˜çš„æŠ½å¥–ç³»ç»Ÿï¼Œæ‰€æœ‰è¿‡ç¨‹å‡åœ¨é“¾ä¸Šè¿›è¡Œï¼Œæ— æ³•ç¯¡æ”¹ã€‚æœ¬é¡¹ç›®åŒ…å«æ™ºèƒ½åˆçº¦å’Œå‰ç«¯åº”ç”¨ä¸¤éƒ¨åˆ†ã€‚ï¼ˆå‰ç«¯åœ¨ lottery-dapp ç›®å½•é‡Œï¼‰

![æŠ½å¥–å¹³å°æˆªå›¾](/img1.png)

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ”— åŸºäºåŒºå—é“¾ï¼Œå…¬å¼€é€æ˜ï¼Œæ— æ³•ç¯¡æ”¹
- ğŸ® ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºå’Œå‚ä¸æŠ½å¥–
- ğŸ’° è‡ªåŠ¨åŒ–å¥–æ± ç®¡ç†å’Œå¥–é‡‘åˆ†é…
- ğŸ”’ å»ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œæ— éœ€ä¿¡ä»»ç¬¬ä¸‰æ–¹
- ğŸŒ æ”¯æŒå¤šç§ç½‘ç»œï¼ˆMoonbase Alphaæµ‹è¯•ç½‘ç­‰ï¼‰

## æŠ€æœ¯æ ˆ

### æ™ºèƒ½åˆçº¦
- Solidity ^0.8.0
- Hardhat
- OpenZeppelinåˆçº¦åº“

### å‰ç«¯
- Next.js
- TypeScript
- ethers.js
- TailwindCSS
- shadcn/uiç»„ä»¶åº“

## ç›®å½•ç»“æ„

```
/
â”œâ”€â”€ contracts/                 # æ™ºèƒ½åˆçº¦ä»£ç 
â”œâ”€â”€ scripts/                   # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ lottery-dapp/              # å‰ç«¯åº”ç”¨
â”œâ”€â”€ test/                      # åˆçº¦æµ‹è¯•
â”œâ”€â”€ hardhat.config.ts          # Hardhaté…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶

- Node.js v16+
- npm æˆ– yarn
- MetaMaské’±åŒ…ï¼ˆæˆ–å…¶ä»–Web3é’±åŒ…ï¼‰
- æµ‹è¯•ç½‘ç»œETHï¼ˆå¦‚Moonbase Alphaæµ‹è¯•ç½‘çš„DEVä»£å¸ï¼‰

### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/curtisyan/blockchain-lottery.git
cd blockchain-lottery
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–ï¼ˆåˆçº¦ç›¸å…³ï¼‰
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd lottery-dapp
npm install
cd ..
```

## æ™ºèƒ½åˆçº¦éƒ¨ç½²

### 1. è®¾ç½®ç¯å¢ƒå˜é‡

åˆ›å»º`.env`æ–‡ä»¶:

```bash
cp .env.example .env
```

ç¼–è¾‘`.env`æ–‡ä»¶ï¼Œå¡«å†™ä»¥ä¸‹å†…å®¹:

```
MOONBASE_URL=https://rpc.testnet.moonbeam.network
PRIVATE_KEY=ä½ çš„éƒ¨ç½²é’±åŒ…ç§é’¥
```

æ³¨æ„ï¼š**è¯·å‹¿åœ¨å…¬å…±ä»“åº“ä¸­æäº¤åŒ…å«ç§é’¥çš„æ–‡ä»¶ï¼**

### 2. ç¼–è¯‘åˆçº¦

```bash
npx hardhat compile
```

### 3. éƒ¨ç½²åˆçº¦

```bash
# éƒ¨ç½²åˆ°Moonbase Alphaæµ‹è¯•ç½‘
npx hardhat run scripts/deploy_LotteryFactory.ts --network moonbase
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨:
- éƒ¨ç½²LotteryFactoryåˆçº¦
- å°†ABIæ–‡ä»¶å¤åˆ¶åˆ°å‰ç«¯ç›®å½•
- æ›´æ–°å‰ç«¯ç¯å¢ƒå˜é‡

### 4. éªŒè¯åˆçº¦ï¼ˆå¯é€‰ï¼‰

```bash
npx hardhat verify --network moonbase éƒ¨ç½²çš„åˆçº¦åœ°å€
```

## å‰ç«¯åº”ç”¨è¿è¡Œ

### 1. è®¾ç½®ç¯å¢ƒå˜é‡

å¦‚æœéƒ¨ç½²è„šæœ¬æ²¡æœ‰è‡ªåŠ¨åˆ›å»ºï¼Œåˆ™æ‰‹åŠ¨åˆ›å»º`lottery-dapp/.env.local`æ–‡ä»¶:

```
NEXT_PUBLIC_LOTTERY_FACTORY_ADDRESS=ä½ çš„åˆçº¦åœ°å€
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd lottery-dapp
npm run dev
```

è®¿é—® http://localhost:3000 æ‰“å¼€åº”ç”¨ã€‚

### 3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
cd lottery-dapp
npm run build
npm run start
```

## ä½¿ç”¨æŒ‡å—

### è¿æ¥é’±åŒ…

1. å®‰è£…MetaMaskï¼ˆæˆ–å…¶ä»–å…¼å®¹é’±åŒ…ï¼‰
2. åˆ‡æ¢åˆ°Moonbase Alphaæµ‹è¯•ç½‘
3. åœ¨åº”ç”¨ä¸­ç‚¹å‡»"è¿æ¥é’±åŒ…"æŒ‰é’®

### åˆ›å»ºæŠ½å¥–

1. ç‚¹å‡»"åˆ›å»ºæ–°çš„æŠ½å¥–"æŒ‰é’®
2. å¡«å†™æŠ½å¥–ä¿¡æ¯ï¼š
   - æŠ½å¥–IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
   - æŠ½å¥–åç§°
   - å‚ä¸è´¹ç”¨ï¼ˆDEVä»£å¸ï¼‰
   - å¼€å¥–æ—¶é—´
3. æäº¤ï¼Œç¡®è®¤äº¤æ˜“

### å‚ä¸æŠ½å¥–

1. æµè§ˆæŠ½å¥–åˆ—è¡¨æˆ–é€šè¿‡IDç›´æ¥è®¿é—®
2. ç‚¹å‡»"å‚ä¸"æŒ‰é’®
3. æ”¯ä»˜å‚ä¸è´¹ç”¨
4. ç¡®è®¤äº¤æ˜“

### å¼€å¥–ä¸é¢†å¥–

1. æŠ½å¥–åˆ›å»ºè€…å¯åœ¨å¼€å¥–æ—¶é—´åç‚¹å‡»"å¼€å¥–"æŒ‰é’®
2. ä¸­å¥–è€…å¯ç‚¹å‡»"é¢†å–å¥–é‡‘"æŒ‰é’®é¢†å–å¥–æ± é‡‘é¢

## éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒ

### 1. å‰ç«¯éƒ¨ç½²

å¯ä»¥å°†å‰ç«¯éƒ¨ç½²åˆ°Vercelã€Netlifyç­‰å¹³å°ï¼š

```bash
# ä½¿ç”¨Verceléƒ¨ç½²
cd lottery-dapp
npm i -g vercel
vercel
```

### 2. åˆçº¦éƒ¨ç½²åˆ°ä¸»ç½‘

```bash
# ç¼–è¾‘hardhat.config.ts, æ·»åŠ ä¸»ç½‘é…ç½®
# ç„¶åæ‰§è¡Œ
npx hardhat run scripts/deploy_LotteryFactory.ts --network mainnet
```

## å¸¸è§é—®é¢˜

### åˆçº¦äº¤äº’å¤±è´¥

- æ£€æŸ¥é’±åŒ…æ˜¯å¦è¿æ¥åˆ°æ­£ç¡®ç½‘ç»œ
- ç¡®è®¤è´¦æˆ·æœ‰è¶³å¤Ÿçš„DEVä»£å¸ï¼ˆç”¨äºæ”¯ä»˜gasè´¹ï¼‰
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### é’±åŒ…è¿æ¥é—®é¢˜

- åˆ·æ–°é¡µé¢
- é‡å¯é’±åŒ…åº”ç”¨
- ç¡®è®¤æµè§ˆå™¨å…è®¸é’±åŒ…æ‰©å±•è®¿é—®

### åˆçº¦ä¸å­˜åœ¨é”™è¯¯

- ç¡®è®¤ç¯å¢ƒå˜é‡ä¸­çš„åˆçº¦åœ°å€æ­£ç¡®
- éªŒè¯åˆçº¦å·²åœ¨å½“å‰ç½‘ç»œä¸Šéƒ¨ç½²
- æ£€æŸ¥ABIæ–‡ä»¶æ˜¯å¦æ­£ç¡®

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Pull Requestæˆ–Issueï¼

1. Forké¡¹ç›®
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤ä½ çš„ä¿®æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€Pull Request

## è®¸å¯è¯

MIT

## è”ç³»æ–¹å¼

realthat@foxmail.com
